# تطبيق إدارة العلاج الدوائي - المميزات الكاملة

## نظرة عامة
تطبيق موبايل متقدم لإدارة العلاج الدوائي مع دعم كامل للعربية والإنجليزية، يدير التعاون بين الفريق الطبي والمريض.

---

## الأدوار والصلاحيات

### 1. الطبيب (Doctor)
- ✅ إنشاء وتعديل الخطة الدوائية
- ✅ تحديد الجرعات والفواصل الزمنية الدنيا
- ✅ إيقاف واستبدال الأدوية
- ✅ مراجعة الالتزام والتقارير
- ✅ إدارة فريق المعينين

### 2. المعين الرئيسي والاحتياطي (Caregiver)
- ✅ إنشاء وتعديل خطة الأدوية
- ✅ تحديد الجرعات والفواصل الزمنية
- ✅ إيقاف واستبدال دواء
- ✅ استقبال التنبيهات
- ✅ تسجيل "تم إعطاء الجرعة"
- ✅ إضافة ملاحظات (تقيء، تأجيل، رفض، ملاحظات مخصصة)
- ✅ رفع صور العبوة عبر الكاميرا
- ✅ مراجعة الالتزام والتقارير

### 3. المريض (Patient)
- ✅ عرض جدول الأدوية الخاص به
- ✅ إشعارات تذكير خفيفة
- ✅ عرض الجرعات والتنبيهات

---

## المميزات الرئيسية

### 1. إدارة الأدوية
- **إضافة أدوية جديدة**: اسم، جرعة، عدد المرات يوميًا، الفاصل الزمني الأدنى، تعليمات
- **تعديل الأدوية**: تحديث أي بيانات للدواء
- **إيقاف الأدوية**: إيقاف تفعيل الدواء دون حذفه
- **حذف الأدوية**: حذف نهائي من السجل

### 2. تسجيل الجرعات
- **تأكيد الجرعة**: ضغطة واحدة لتأكيد الجرعة
- **الفاصل الزمني الأمين**: منع إعطاء جرعة قبل الوقت المسموح
- **حساب الجرعة التالية**: حساب تلقائي وقت الجرعة القادمة
- **ملاحظات الجرعة**:
  - تقيء (Vomiting)
  - تأجيل (Delayed)
  - رفض (Refused)
  - ملاحظات مخصصة

### 3. التصوير
- **التقاط الصور**: التقاط صور العبوة عبر الكاميرا
- **حفظ الصور**: ربط الصور بسجل الجرعة
- **المراجعة**: مراجعة الصور من الجرعات السابقة

### 4. مراقبة الالتزام
- **درجة الالتزام اليومية**: نسبة الجرعات المأخوذة اليوم
- **درجة الالتزام الأسبوعية**: مقارنة الأداء خلال 7 أيام
- **الاتجاه**: رؤية الاتجاه الصاعد أو الهابط
- **الحالة**: ممتاز / جيد / يحتاج تحسين

### 5. الفريق الطبي
- **إضافة معينين**: إضافة معينين رئيسيين أو احتياطيين
- **إدارة الأدوار**: تحديد صلاحيات كل عضو
- **التعاون**: مشاركة البيانات بشكل آمن

### 6. الدعم متعدد اللغات
- **العربية والإنجليزية**: واجهة كاملة بكلا اللغتين
- **التخزين**: حفظ تفضيل اللغة في الحساب
- **التبديل الفوري**: تبديل اللغة في أي وقت

---

## نظام قاعدة البيانات

### الجداول الرئيسية

#### 1. profiles
- معلومات المستخدم الكاملة
- الدور (طبيب / معين رئيسي / معين احتياطي / مريض)
- تفضيل اللغة
- حالة الحساب

#### 2. patients
- معلومات المريض
- تاريخ الميلاد
- الملاحظات الطبية

#### 3. patient_team
- ربط المريض بفريقه الطبي
- تحديد دور كل فرد في الفريق
- تاريخ التعيين

#### 4. medications
- تفاصيل الأدوية
- الجرعة والتكرار
- الفاصل الزمني الأدنى
- حالة النشاط

#### 5. dose_logs
- سجل كل جرعة تم إعطاؤها
- وقت التطبيق
- من قام بتطبيقها
- ما إذا كانت في الوقت المحدد

#### 6. dose_notes
- ملاحظات مرتبطة بكل جرعة
- نوع الملاحظة
- المحتوى

#### 7. dose_images
- صور العبوة
- مسار التخزين
- من قام برفعها

#### 8. adherence_scores
- درجات الالتزام
- الفترة الزمنية
- النسبة المئوية

---

## نظام الأمان

### Row Level Security (RLS)
- كل مستخدم لا يرى إلا بيانات المرضى المسندة إليه
- المريض يرى فقط بيانات نفسه
- الطبيب يدير كل بيانات الفريق
- التشفير الكامل للبيانات الحساسة

### مراقبة الصلاحيات
- الأطباء فقط يمكنهم تعديل الأدوية
- المعينون يمكنهم تأكيد الجرعات
- المرضى يمكنهم الاطلاع فقط

---

## الميزات المتقدمة

### 1. منع التعارض الزمني
- التحقق من الفاصل الزمني الأدنى
- رسالة واضحة عند محاولة إعطاء جرعة مبكرة

### 2. حساب التوقيت التلقائي
- حساب وقت الجرعة التالية بناءً على الفاصل الزمني
- تحديث تلقائي عند كل جرعة

### 3. إشعارات التنبيه
- Edge Function للتحقق من الجرعات المستحقة
- تنبيهات قبل 30 دقيقة من الجرعة

### 4. الملاحظات المفصلة
- تسجيل أي مشاكل مع الجرعة
- تتبع سلوك المريض وتفاعله

### 5. الصور الرقمية
- توثيق العبوة الأصلية
- التحقق من صحة الدواء

---

## مسارات التطبيق

### المصادقة
- `/login` - تسجيل الدخول
- `/register` - إنشاء حساب جديد

### الشاشات الرئيسية
- `/patients` - إدارة المرضى (للأطباء)
- `/medications` - إدارة الأدوية وتأكيد الجرعات
- `/adherence` - مراقبة الالتزام
- `/settings` - الإعدادات وإدارة الحساب

---

## التثبيت والبدء

### 1. إعداد البيئة
```bash
cp .env.example .env
# أضف معلومات Supabase
```

### 2. تثبيت المتطلبات
```bash
npm install
```

### 3. تشغيل التطبيق
```bash
npm run dev
```

---

## التقنيات المستخدمة

- **Framework**: Expo Router
- **UI**: React Native
- **قاعدة البيانات**: Supabase (PostgreSQL)
- **المصادقة**: Supabase Auth
- **الصور**: Expo Camera + Supabase Storage
- **الأيقونات**: Lucide React Native
- **الأمان**: Row Level Security (RLS)

---

## نصائح الاستخدام

### للأطباء
1. أضف المرضى أولاً
2. أضف معينين للفريق
3. ضع خطة الأدوية التفصيلية
4. راجع درجات الالتزام بشكل منتظم

### للمعينين
1. تفقد الجرعات المستحقة يوميًا
2. أكد الجرعات فور إعطاؤها
3. أضف ملاحظات عند وجود مشاكل
4. التقط صور للعبوة

### للمريض
1. افتح التطبيق لرؤية الجدول
2. ستتلقى تنبيهات تذكيرية
3. ادع الفريق الطبي للمشاركة

---

## الدعم والمساعدة

لأي أسئلة أو مشاكل:
- تحقق من الاتصال بـ Supabase
- تأكد من وجود الأذونات اللازمة
- ابحث عن الأخطاء في سجل التطبيق

---

**الإصدار**: 1.0.0
**آخر تحديث**: 2024
